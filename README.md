# FilmSense Steam æ¸¸æˆæ¨èç³»ç»Ÿ - åç«¯æœåŠ¡

åŸºäºæ·±åº¦å­¦ä¹ çš„ Steam æ¸¸æˆä¸ªæ€§åŒ–æ¨èç³»ç»Ÿåç«¯ï¼Œé‡‡ç”¨å¬å›-æ’åºä¸¤é˜¶æ®µæ¶æ„ï¼Œæ”¯æŒå¤šç§æ¨èç®—æ³•å’ŒåŠ¨æ€å‘é‡èåˆï¼Œæä¾›æ¯«ç§’çº§å»¶è¿Ÿçš„æ¨èæœåŠ¡ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **å¤šé˜¶æ®µæ¨èæ¶æ„**ï¼šå¬å›å±‚ï¼ˆEmbedding/çƒ­é—¨åº¦ï¼‰â†’ æ’åºå±‚ï¼ˆè§„åˆ™æ’åºï¼‰â†’ ä¸šåŠ¡è¿‡æ»¤ â†’ å¤šæ ·æ€§æ§åˆ¶
- **åŠ¨æ€å‘é‡èåˆ**ï¼šå®æ—¶èåˆç”¨æˆ·äº¤äº’å†å²ï¼Œå®ç°æ¨èç»“æœçš„åŠ¨æ€è°ƒæ•´
- **FAISS å‘é‡ç´¢å¼•**ï¼šæ”¯æŒ IVF/HNSW/Flat å¤šç§ç´¢å¼•ç±»å‹ï¼Œé«˜æ•ˆå‘é‡æ£€ç´¢
- **ç”¨æˆ·ç”»åƒç³»ç»Ÿ**ï¼šGamer DNA å…­ç»´å±æ€§åˆ†æï¼ˆç­–ç•¥/ååº”/æ¢ç´¢/ç¤¾äº¤/æ”¶é›†/ç«æŠ€ï¼‰
- **å†·å¯åŠ¨å¤„ç†**ï¼šæ ¹æ®ç”¨æˆ·äº¤äº’æ¬¡æ•°è‡ªåŠ¨åˆ‡æ¢æ¨èç­–ç•¥
- **å®Œæ•´çš„ç”¨æˆ·ç³»ç»Ÿ**ï¼šJWT è®¤è¯ã€æ¸¸æˆåº“ç®¡ç†ã€äº¤äº’è®°å½•ã€æ”¶è—åŠŸèƒ½
- **é«˜æ€§èƒ½ç¼“å­˜**ï¼šRedis å¤šçº§ç¼“å­˜ï¼Œæ¨èç»“æœç¼“å­˜å‘½ä¸­ç‡ > 80%

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API Layer (FastAPI)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Auth   â”‚ â”‚  Users  â”‚ â”‚  Games  â”‚ â”‚ Library â”‚ â”‚  Recs   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Recommendation Pipeline                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Recall    â”‚ -> â”‚   Ranking   â”‚ -> â”‚  Business Filter &  â”‚  â”‚
â”‚  â”‚  (å¬å›å±‚)   â”‚    â”‚   (æ’åºå±‚)   â”‚    â”‚  Diversity Control  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   - Embedding        - Rule-based       - å¼€å‘å•†/ç±»å‹å»é‡       â”‚
â”‚   - Popularity       - Quality Score    - å¤šæ ·æ€§æ§åˆ¶            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Storage Layer                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   MySQL/    â”‚    â”‚    Redis    â”‚    â”‚       FAISS         â”‚  â”‚
â”‚  â”‚  PostgreSQL â”‚    â”‚   (Cache)   â”‚    â”‚   (Vector Index)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
filmsense-backend/
â”œâ”€â”€ backend/                    # ä¸»åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ api/                    # API æ¥å£å±‚
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â”œâ”€â”€ endpoints/      # API ç«¯ç‚¹
â”‚   â”‚       â”‚   â”œâ”€â”€ auth.py           # è®¤è¯æ¥å£
â”‚   â”‚       â”‚   â”œâ”€â”€ users.py          # ç”¨æˆ·æ¥å£
â”‚   â”‚       â”‚   â”œâ”€â”€ games.py          # æ¸¸æˆæ¥å£
â”‚   â”‚       â”‚   â”œâ”€â”€ library.py        # æ¸¸æˆåº“æ¥å£
â”‚   â”‚       â”‚   â”œâ”€â”€ recommendations.py # æ¨èæ¥å£
â”‚   â”‚       â”‚   â””â”€â”€ interactions.py   # äº¤äº’æ¥å£
â”‚   â”‚       â””â”€â”€ api.py          # è·¯ç”±æ±‡æ€»
â”‚   â”‚   â””â”€â”€ pipeline.py         # æ¨èæµç¨‹ç¼–æ’
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/                   # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth_service.py     # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ jwt_handler.py      # JWT å¤„ç†
â”‚   â”‚   â”œâ”€â”€ password_utils.py   # å¯†ç å·¥å…·
â”‚   â”‚   â””â”€â”€ dependencies.py     # FastAPI ä¾èµ–
â”‚   â”‚
â”‚   â”œâ”€â”€ database/               # æ•°æ®åº“å±‚
â”‚   â”‚   â”œâ”€â”€ connection.py       # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ models.py           # SQLAlchemy æ¨¡å‹
â”‚   â”‚   â””â”€â”€ crud/               # CRUD æ“ä½œ
â”‚   â”‚       â”œâ”€â”€ user_crud.py
â”‚   â”‚       â”œâ”€â”€ game_crud.py
â”‚   â”‚       â”œâ”€â”€ library_crud.py
â”‚   â”‚       â””â”€â”€ profile_crud.py
â”‚   â”‚
â”‚   â”œâ”€â”€ cache/                  # ç¼“å­˜å±‚
â”‚   â”‚   â”œâ”€â”€ redis_client.py     # Redis å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ cache_manager.py    # ç¼“å­˜ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ feature_store.py    # ç‰¹å¾å­˜å‚¨ï¼ˆå‘é‡/åºåˆ—ï¼‰
â”‚   â”‚   â””â”€â”€ faiss_index.py      # FAISS å‘é‡ç´¢å¼•
â”‚   â”‚
â”‚   â”œâ”€â”€ recall/                 # å¬å›å±‚
â”‚   â”‚   â”œâ”€â”€ base_recall.py      # å¬å›åŸºç±»
â”‚   â”‚   â”œâ”€â”€ embedding_recall.py # åµŒå…¥å¬å›ï¼ˆFAISS + åŠ¨æ€èåˆï¼‰
â”‚   â”‚   â””â”€â”€ popularity_recall.py # çƒ­é—¨åº¦å¬å›
â”‚   â”‚
â”‚   â”œâ”€â”€ ranking/                # æ’åºå±‚
â”‚   â”‚   â”œâ”€â”€ base_ranker.py      # æ’åºåŸºç±»
â”‚   â”‚   â”œâ”€â”€ rule_ranker.py      # è§„åˆ™æ’åºå™¨
â”‚   â”‚   â”œâ”€â”€ business_filter.py  # ä¸šåŠ¡è¿‡æ»¤å™¨
â”‚   â”‚   â”œâ”€â”€ diversity_controller.py # å¤šæ ·æ€§æ§åˆ¶
â”‚   â”‚   â””â”€â”€ ranking_strategy.py # æ’åºç­–ç•¥ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                # Pydantic æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”œâ”€â”€ games.py
â”‚   â”‚   â”œâ”€â”€ library.py
â”‚   â”‚   â”œâ”€â”€ profile.py
â”‚   â”‚   â”œâ”€â”€ recommendations.py
â”‚   â”‚   â””â”€â”€ common.py
â”‚   â”‚
â”‚   â”œâ”€â”€ tasks/                  # åå°ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ demo_import.py      # å‘é‡å¯¼å…¥è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ compute_popular_games.py  # çƒ­é—¨æ¦œå•è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ compute_user_profiles.py  # ç”¨æˆ·ç”»åƒè®¡ç®—
â”‚   â”‚   â””â”€â”€ import_game_metadata.py   # æ¸¸æˆå…ƒæ•°æ®å¯¼å…¥
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”‚   â””â”€â”€ logger.py           # æ—¥å¿—å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ logging_config.py       # æ—¥å¿—é…ç½®
â”‚   â””â”€â”€ main.py                 # FastAPI åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ scripts/                    # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ init_db.py              # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ init.sql                # SQL åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ load_sample_data.py     # ç¤ºä¾‹æ•°æ®åŠ è½½
â”‚   â””â”€â”€ start_dev.py            # å¼€å‘æœåŠ¡å™¨å¯åŠ¨
â”‚
â”œâ”€â”€ alembic/                    # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ env.py
â”‚   â””â”€â”€ script.py.mako
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•ä»£ç 
â”‚   â””â”€â”€ smoke_api.py            # API å†’çƒŸæµ‹è¯•
â”‚
â”œâ”€â”€ doc/                        # æ–‡æ¡£
â”‚   â””â”€â”€ API_DOCUMENTATION.md    # API æ–‡æ¡£
â”‚
â”œâ”€â”€ logs/                       # æ—¥å¿—ç›®å½•
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ Dockerfile                  # Docker é•œåƒ
â”œâ”€â”€ docker-compose.yml          # Docker ç¼–æ’ï¼ˆå¼€å‘ï¼‰
â”œâ”€â”€ docker-compose.prod.yml     # Docker ç¼–æ’ï¼ˆç”Ÿäº§ï¼‰
â”œâ”€â”€ nginx.conf                  # Nginx é…ç½®
â”œâ”€â”€ alembic.ini                 # Alembic é…ç½®
â””â”€â”€ .env                        # ç¯å¢ƒå˜é‡
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.9+
- MySQL 8.0+ æˆ– PostgreSQL 14+
- Redis 7.0+
- (å¯é€‰) NVIDIA GPU + Triton Inference Server

### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository_url>
cd filmsense-backend

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“å¯†ç ã€JWT å¯†é’¥ç­‰

# 3. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 4. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 5. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. å¯åŠ¨ MySQL å’Œ Redisï¼ˆä½¿ç”¨ Docker æˆ–æœ¬åœ°å®‰è£…ï¼‰
docker-compose up -d db redis

# 4. åˆå§‹åŒ–æ•°æ®åº“
python -m scripts.init_db

# 5. å¯¼å…¥æ¸¸æˆå…ƒæ•°æ®ï¼ˆå¯é€‰ï¼Œæ‰‹åŠ¨å¯¼å…¥ï¼‰
python -m backend.tasks.import_game_metadata

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000

# æœåŠ¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹åå°ä»»åŠ¡ï¼š
# - å¯¼å…¥å‘é‡æ•°æ®å¹¶æ„å»º FAISS ç´¢å¼• (demo_import)
# - è®¡ç®—çƒ­é—¨æ¸¸æˆæ¦œå• (compute_popular_games)
# - è®¡ç®—ç”¨æˆ·ç”»åƒ (compute_user_profiles)
```

### éªŒè¯å®‰è£…

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# æŸ¥çœ‹ API æ–‡æ¡£
# æµè§ˆå™¨æ‰“å¼€ http://localhost:8000/docs
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| **æ•°æ®åº“é…ç½®** | | |
| `DB_TYPE` | postgresql | æ•°æ®åº“ç±»å‹ (postgresql/mysql) |
| `DB_HOST` | localhost | æ•°æ®åº“ä¸»æœº |
| `DB_PORT` | 5432/3306 | æ•°æ®åº“ç«¯å£ |
| `DB_NAME` | filmsense | æ•°æ®åº“åç§° |
| `DB_USER` | user | æ•°æ®åº“ç”¨æˆ· |
| `DB_PASSWORD` | password | æ•°æ®åº“å¯†ç  |
| `DATABASE_URL` | - | å®Œæ•´æ•°æ®åº“ URLï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ |
| **Redis é…ç½®** | | |
| `REDIS_URL` | redis://localhost:6379 | Redis è¿æ¥ URL |
| `REDIS_MAX_CONNECTIONS` | 20 | æœ€å¤§è¿æ¥æ•° |
| **JWT é…ç½®** | | |
| `JWT_SECRET_KEY` | - | JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰ |
| `JWT_ALGORITHM` | HS256 | JWT ç®—æ³• |
| `JWT_EXPIRATION_HOURS` | 24 | Token è¿‡æœŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰ |
| **æ¨èé…ç½®** | | |
| `DEFAULT_TOPK` | 10 | é»˜è®¤æ¨èæ•°é‡ |
| `RECALL_SIZE` | 500 | å¬å›å€™é€‰é›†å¤§å° |
| `EMBEDDING_DIM` | 64 | åµŒå…¥å‘é‡ç»´åº¦ |
| `CACHE_TTL_SECONDS` | 3600 | ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ |
| **åŠ¨æ€èåˆé…ç½®** | | |
| `DYNAMIC_FUSION_ENABLED` | true | æ˜¯å¦å¯ç”¨åŠ¨æ€å‘é‡èåˆ |
| `DYNAMIC_FUSION_MIN_INTERACTIONS` | 3 | è§¦å‘èåˆçš„æœ€å°äº¤äº’æ¬¡æ•° |
| `DYNAMIC_FUSION_WEIGHT` | 0.1 | äº¤äº’å‘é‡èåˆæƒé‡ |
| **ä¸šåŠ¡è§„åˆ™é…ç½®** | | |
| `MAX_SAME_DEVELOPER` | 2 | åŒä¸€å¼€å‘å•†æœ€å¤§æ¨èæ•° |
| `MAX_SAME_GENRE` | 3 | åŒä¸€ç±»å‹æœ€å¤§æ¨èæ•° |
| `MIN_INTERACTION_FOR_EMBEDDING` | 5 | ä½¿ç”¨åµŒå…¥å¬å›çš„æœ€å°äº¤äº’æ•° |

## ğŸ“Š æ•°æ®åº“æ¨¡å‹

### æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- ç”¨æˆ·è¡¨
users (user_id, username, email, password_hash, created_at, updated_at)

-- ç”¨æˆ·äº¤äº’è¡¨
user_interactions (interaction_id, user_id, product_id, timestamp, play_hours, early_access)

-- ç”¨æˆ·è¯„ä»·è¡¨
user_reviews (review_id, user_id, product_id, rating, review_text, created_at)

-- æ¸¸æˆå…ƒæ•°æ®è¡¨
game_metadata (product_id, title, app_name, genres, tags, developer, publisher, 
               metascore, sentiment, release_date, price, description, ...)

-- ç”¨æˆ·æ¸¸æˆåº“è¡¨
user_library (library_id, user_id, product_id, app_id, is_favorite, is_installed,
              playtime_hours, last_played_at, achievement_progress, ...)

-- ç”¨æˆ·ç”»åƒè¡¨
user_profiles (profile_id, user_id, avatar_url, level, exp, gamer_dna_stats,
               primary_type, secondary_type, favorite_genres, ...)

-- æ¨èæ—¥å¿—è¡¨
recommendation_logs (log_id, user_id, recommended_items, algorithm, 
                     recall_time_ms, ranking_time_ms, total_time_ms, created_at)

-- ç”¨æˆ·åé¦ˆè¡¨
user_feedback (feedback_id, user_id, product_id, feedback_type, recommendation_id)
```

## ğŸ”Œ API æ¥å£

### ä¸»è¦ç«¯ç‚¹

| æ¨¡å— | ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|------|
| **è®¤è¯** | `/api/v1/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| | `/api/v1/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| | `/api/v1/auth/refresh` | POST | åˆ·æ–° Token |
| | `/api/v1/auth/verify` | GET | éªŒè¯ Token |
| **ç”¨æˆ·** | `/api/v1/user/profile` | GET/PUT | ç”¨æˆ·èµ„æ–™ |
| | `/api/v1/user/profile/complete` | GET | å®Œæ•´ç”¨æˆ·ç”»åƒ |
| | `/api/v1/user/library` | GET | ç”¨æˆ·æ¸¸æˆåº“ |
| | `/api/v1/user/favorites` | GET | æ”¶è—åˆ—è¡¨ |
| **æ¸¸æˆ** | `/api/v1/games` | GET | æ¸¸æˆåˆ—è¡¨ |
| | `/api/v1/games/{app_id}` | GET | æ¸¸æˆè¯¦æƒ… |
| | `/api/v1/games/genres` | GET | å“ç±»åˆ—è¡¨ |
| | `/api/v1/games/tags` | GET | æ ‡ç­¾åˆ—è¡¨ |
| **æ¨è** | `/api/v1/recommendations` | GET | ä¸ªæ€§åŒ–æ¨è |
| | `/api/v1/recommendations/popular` | GET | çƒ­é—¨æ¸¸æˆ |
| | `/api/v1/recommendations/similar/{item_id}` | GET | ç›¸ä¼¼æ¸¸æˆ |
| | `/api/v1/recommendations/explanation` | GET | æ¨èè§£é‡Š |
| **äº¤äº’** | `/api/v1/interactions/interact` | POST | è®°å½•äº¤äº’ |
| | `/api/v1/interactions/feedback` | POST | ç”¨æˆ·åé¦ˆ |

è¯¦ç»† API æ–‡æ¡£è¯·æŸ¥çœ‹ `/docs` æˆ– [API_DOCUMENTATION.md](doc/API_DOCUMENTATION.md)

## ğŸ§  æ¨èç®—æ³•

### ç®—æ³•é€‰æ‹©ç­–ç•¥

ç³»ç»Ÿæ ¹æ®ç”¨æˆ·äº¤äº’æ¬¡æ•°è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„æ¨èç®—æ³•ï¼š

| äº¤äº’æ¬¡æ•° | ç®—æ³• | è¯´æ˜ |
|----------|------|------|
| < 3 | `popularity` | å†·å¯åŠ¨ç”¨æˆ·ï¼Œä½¿ç”¨çƒ­é—¨æ¨è |
| 3-5 | `content` | å°‘é‡äº¤äº’ï¼Œä½¿ç”¨å†…å®¹æ¨è |
| > 5 | `embedding` | è¶³å¤Ÿäº¤äº’ï¼Œä½¿ç”¨ååŒè¿‡æ»¤ |

### æ’åºç­–ç•¥

- **default**ï¼šå¹³è¡¡æ¨èè´¨é‡å’Œå¤šæ ·æ€§
- **diversity_focused**ï¼šä¼˜å…ˆä¿è¯æ¨èç»“æœçš„å¤šæ ·æ€§
- **quality_focused**ï¼šä¼˜å…ˆä¿è¯æ¨èè´¨é‡ï¼ˆç›¸å…³æ€§ï¼‰

### åŠ¨æ€å‘é‡èåˆ

å½“ç”¨æˆ·äº¤äº’æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼åï¼Œç³»ç»Ÿä¼šå°†ç”¨æˆ·æœ€è¿‘äº¤äº’çš„æ¸¸æˆå‘é‡ä¸åŸå§‹ç”¨æˆ·å‘é‡è¿›è¡ŒåŠ æƒèåˆï¼š

```
dynamic_embedding = (1 - Î±) Ã— original_embedding + Î± Ã— interaction_embedding
```

å…¶ä¸­ `interaction_embedding` æ˜¯ç”¨æˆ·æœ€è¿‘äº¤äº’æ¸¸æˆå‘é‡çš„æ—¶é—´è¡°å‡åŠ æƒå¹³å‡ã€‚

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/test_api.py

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=backend tests/

# API å†’çƒŸæµ‹è¯•
python -m tests.smoke_api
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **P90 å»¶è¿Ÿ**: < 100ms
- **å¬å›é˜¶æ®µ**: ~50msï¼ˆFAISS å‘é‡æ£€ç´¢ï¼‰
- **æ’åºé˜¶æ®µ**: ~30ms
- **ç¼“å­˜å‘½ä¸­ç‡**: > 80%
- **æ”¯æŒ QPS**: 1000+ï¼ˆå•å®ä¾‹ï¼‰

## ğŸš€ éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# ä½¿ç”¨ Gunicorn å¯åŠ¨
gunicorn backend.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000

# æˆ–ä½¿ç”¨ Docker
docker-compose -f docker-compose.prod.yml up -d
```

### ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

- [ ] ä¿®æ”¹ `JWT_SECRET_KEY` ä¸ºå¼ºéšæœºå­—ç¬¦ä¸²
- [ ] é…ç½®æ•°æ®åº“è¿æ¥æ± å¤§å°
- [ ] é…ç½® Redis æŒä¹…åŒ–
- [ ] å¯ç”¨ HTTPS
- [ ] é…ç½® CORS å…è®¸çš„æº
- [ ] è®¾ç½®æ—¥å¿—çº§åˆ«ä¸º `WARNING` æˆ– `ERROR`
- [ ] é…ç½®ç›‘æ§å’Œå‘Šè­¦

## ğŸ“ å¼€å‘è§„èŒƒ

- éµå¾ª PEP 8 ä»£ç é£æ ¼
- ä½¿ç”¨ Black æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ Type Hints
- ç¼–å†™å•å…ƒæµ‹è¯•
- æäº¤å‰è¿è¡Œæµ‹è¯•

```bash
# ä»£ç æ ¼å¼åŒ–
black backend/

# ä»£ç æ£€æŸ¥
flake8 backend/

# å¯¼å…¥æ’åº
isort backend/
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [API æ–‡æ¡£](doc/API_DOCUMENTATION.md)
- [FastAPI å®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [FAISS æ–‡æ¡£](https://github.com/facebookresearch/faiss)
